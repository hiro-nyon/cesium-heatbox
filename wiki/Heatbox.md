# JSDoc: Class: Heatbox

# Class: Heatbox

## Heatbox(viewer, options)

## Constructor

#### new Heatbox(viewer, options)

##### Parameters:

### Classes

### Methods

#### clear()

#### clear()

#### (async) createFromEntities(entities) → {Promise.<Object>}

##### Parameters:

##### Returns:

#### (async) createFromEntities(entities) → {Promise.<Object>}

##### Parameters:

##### Returns:

#### destroy()

#### destroy()

#### getBounds() → {Object|null}

##### Returns:

#### getBounds() → {Object|null}

##### Returns:

#### getDebugInfo() → {Object}

##### Returns:

#### getDebugInfo() → {Object}

##### Returns:

#### getOptions() → {Object}

##### Returns:

#### getOptions() → {Object}

##### Returns:

#### getStatistics() → {Object|null}

##### Returns:

#### getStatistics() → {Object|null}

##### Returns:

#### setData(entities)

##### Parameters:

#### setData(entities)

##### Parameters:

#### setVisible(show)

##### Parameters:

#### setVisible(show)

##### Parameters:

#### updateOptions(newOptions)

##### Parameters:

#### updateOptions(newOptions)

##### Parameters:

#### (static) filterEntities(entities, predicate) → {Array.<Cesium.Entity>}

##### Parameters:

##### Returns:

#### (static) filterEntities(entities, predicate) → {Array.<Cesium.Entity>}

##### Parameters:

##### Returns:

## HeatboxHeatbox(viewer, options)

## Constructor

#### new Heatbox(viewer, options)

##### Parameters:

### Classes

### Methods

#### clear()

#### clear()

#### (async) createFromEntities(entities) → {Promise.<Object>}

##### Parameters:

##### Returns:

#### (async) createFromEntities(entities) → {Promise.<Object>}

##### Parameters:

##### Returns:

#### destroy()

#### destroy()

#### getBounds() → {Object|null}

##### Returns:

#### getBounds() → {Object|null}

##### Returns:

#### getDebugInfo() → {Object}

##### Returns:

#### getDebugInfo() → {Object}

##### Returns:

#### getOptions() → {Object}

##### Returns:

#### getOptions() → {Object}

##### Returns:

#### getStatistics() → {Object|null}

##### Returns:

#### getStatistics() → {Object|null}

##### Returns:

#### setData(entities)

##### Parameters:

#### setData(entities)

##### Parameters:

#### setVisible(show)

##### Parameters:

#### setVisible(show)

##### Parameters:

#### updateOptions(newOptions)

##### Parameters:

#### updateOptions(newOptions)

##### Parameters:

#### (static) filterEntities(entities, predicate) → {Array.<Cesium.Entity>}

##### Parameters:

##### Returns:

#### (static) filterEntities(entities, predicate) → {Array.<Cesium.Entity>}

##### Parameters:

##### Returns:

## Home

### Classes

### Global

CesiumJS Viewer インスタンス

エンティティからヒートマップを作成（非同期API）

エンティティからヒートマップを作成（非同期API）

インスタンスを破棄し、イベントリスナーを解放

インスタンスを破棄し、イベントリスナーを解放

現在のオプションを取得

現在のオプションを取得

ヒートマップデータを設定し、描画を実行

ヒートマップデータを設定し、描画を実行

表示/非表示を切り替え

表示する場合はtrue

表示/非表示を切り替え

表示する場合はtrue

エンティティ配列をフィルタ（ユーティリティ, 静的メソッド）

エンティティ配列をフィルタ（ユーティリティ, 静的メソッド）

CesiumJS Viewer インスタンス

エンティティからヒートマップを作成（非同期API）

エンティティからヒートマップを作成（非同期API）

インスタンスを破棄し、イベントリスナーを解放

インスタンスを破棄し、イベントリスナーを解放

現在のオプションを取得

現在のオプションを取得

ヒートマップデータを設定し、描画を実行

ヒートマップデータを設定し、描画を実行

表示/非表示を切り替え

表示する場合はtrue

表示/非表示を切り替え

表示する場合はtrue

エンティティ配列をフィルタ（ユーティリティ, 静的メソッド）

エンティティ配列をフィルタ（ユーティリティ, 静的メソッド）

| Name | Type | Description |
|---|---|---|
| viewer | Cesium.Viewer | CesiumJS Viewer インスタンス |
| options | Object | 設定オプション |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| show | boolean | 表示する場合はtrue |

| Name | Type | Description |
|---|---|---|
| show | boolean | 表示する場合はtrue |

| Name | Type | Description |
|---|---|---|
| newOptions | Object | 新しいオプション |

| Name | Type | Description |
|---|---|---|
| newOptions | Object | 新しいオプション |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | エンティティ配列 |
| predicate | function | フィルタ関数 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | エンティティ配列 |
| predicate | function | フィルタ関数 |

| Name | Type | Description |
|---|---|---|
| viewer | Cesium.Viewer | CesiumJS Viewer インスタンス |
| options | Object | 設定オプション |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | 対象エンティティ配列 |

| Name | Type | Description |
|---|---|---|
| show | boolean | 表示する場合はtrue |

| Name | Type | Description |
|---|---|---|
| show | boolean | 表示する場合はtrue |

| Name | Type | Description |
|---|---|---|
| newOptions | Object | 新しいオプション |

| Name | Type | Description |
|---|---|---|
| newOptions | Object | 新しいオプション |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | エンティティ配列 |
| predicate | function | フィルタ関数 |

| Name | Type | Description |
|---|---|---|
| entities | Array.<Cesium.Entity> | エンティティ配列 |
| predicate | function | フィルタ関数 |


## Quick Start Example

```javascript
// 1. Initialize Heatbox
const viewer = new Cesium.Viewer('cesiumContainer');
const heatbox = new Heatbox(viewer);

// 2. Add sample data
heatbox.addEntityDataArray([
  { position: Cesium.Cartesian3.fromDegrees(139.7, 35.7, 100), userData: { value: 10 } },
  { position: Cesium.Cartesian3.fromDegrees(139.8, 35.8, 100), userData: { value: 20 } }
]);

// 3. Generate heatmap
await heatbox.generateHeatmap({
  voxelSize: 50,
  colorMap: 'viridis',
  highlightTopN: 5
});
```

## v0.1.6 New Features

```javascript
// Adaptive outline width control
const options = {
  outlineWidthResolver: ({ voxel, isTopN, normalizedDensity }) => {
    if (isTopN) return 6;           // TopN: thick outline
    if (normalizedDensity > 0.7) return 1; // Dense: thin
    return 3;                       // Sparse: normal
  },
  voxelGap: 1.5,        // Gap between voxels (meters)
  outlineOpacity: 0.8   // Outline transparency
};
```
