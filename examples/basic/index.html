<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>CesiumJS Heatbox - Basic Example</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.120/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.120/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; background: #000; }
    .control-panel { position: absolute; top: 10px; left: 10px; background: rgba(40, 40, 40, 0.85); padding: 15px; border-radius: 5px; color: white; font-family: sans-serif; max-width: 320px; }
    .control-panel h3 { margin: 0 0 10px; }
    .control-group { margin-bottom: 12px; }
    .control-group label { display: block; margin-bottom: 4px; font-size: 14px; }
    .control-group input[type="number"], .control-group input[type="range"], .control-group button { width: 100%; box-sizing: border-box; }
    .control-group button { padding: 8px; margin-top: 5px; }
    #statistics { margin-top: 10px; padding-top: 10px; border-top: 1px solid #555; }
    #status { margin-top: 10px; font-weight: bold; }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <div class="control-panel">
    <h3>Cesium-Heatbox Example</h3>
    <div class="control-group">
      <label for="entityCount">Entity Count: <span id="entityCountValue">1000</span></label>
      <input type="range" id="entityCount" min="100" max="5000" value="1000" step="100">
    </div>
    <div class="control-group">
      <button id="generateBtn">1. Generate Entities</button>
    </div>
    <hr>
    <div class="control-group">
      <input type="checkbox" id="autoVoxelSize"> <label for="autoVoxelSize">Auto Voxel Size (v0.1.4)</label>
    </div>
    <div class="control-group" id="manualVoxelSizeGroup">
      <label for="voxelSize">Voxel Size (meters):</label>
      <input type="number" id="voxelSize" value="30" min="5" max="200">
    </div>
    <div class="control-group">
      <label for="opacity">Opacity: <span id="opacityValue">0.7</span></label>
      <input type="range" id="opacity" min="0.1" max="1.0" value="0.7" step="0.05">
    </div>
    <div class="control-group">
      <input type="checkbox" id="showEmpty"> <label for="showEmpty">Show Empty Voxels</label>
    </div>
    <div class="control-group">
      <input type="checkbox" id="showOutline" checked> <label for="showOutline">Show Outline</label>
    </div>
    <div class="control-group">
      <input type="checkbox" id="wireframeOnly"> <label for="wireframeOnly">Wireframe Only (v0.1.2)</label>
    </div>
    <div class="control-group">
      <input type="checkbox" id="heightBased"> <label for="heightBased">Height-Based (v0.1.2)</label>
    </div>
    <div class="control-group">
      <input type="checkbox" id="debugLogs"> <label for="debugLogs">Debug Logs (開発用)</label>
    </div>
    <div class="control-group">
      <input type="checkbox" id="showBounds"> <label for="showBounds">Show Bounds (v0.1.5)</label>
    </div>
    <div class="control-group">
      <label for="colorMap">Color Map (v0.1.5):</label>
      <select id="colorMap">
        <option value="custom">カスタム (min/max色)</option>
        <option value="viridis">Viridis (知覚均等)</option>
        <option value="inferno">Inferno (知覚均等)</option>
      </select>
    </div>
    <div class="control-group">
      <input type="checkbox" id="diverging"> <label for="diverging">Diverging Colors (v0.1.5)</label>
    </div>
    <div class="control-group">
      <label for="highlightTopN">Highlight Top N (v0.1.5):</label>
      <input type="number" id="highlightTopN" min="0" max="100" placeholder="空白=無効">
    </div>
    <!-- v0.1.6: 枠線重なり対策 -->
    <hr>
    <h4 style="margin: 10px 0 5px; font-size: 14px; color: #ccc;">v0.1.6 枠線制御</h4>
    <div class="control-group">
      <label for="voxelGap">Voxel Gap (m): <span id="voxelGapValue">0</span></label>
      <input type="range" id="voxelGap" min="0" max="5" value="0" step="0.5">
    </div>
    <div class="control-group">
      <label for="outlineOpacity">Outline Opacity: <span id="outlineOpacityValue">1.0</span></label>
      <input type="range" id="outlineOpacity" min="0.1" max="1.0" value="1.0" step="0.1">
    </div>
    <div class="control-group">
      <input type="checkbox" id="adaptiveOutline"> <label for="adaptiveOutline">Adaptive Outline (密度対応)</label>
    </div>
    <!-- v0.1.6.1: インセット枠線 -->
    <h5 style="margin: 8px 0 3px; font-size: 13px; color: #aaa;">v0.1.6.1 Inset Outline</h5>
    <div class="control-group">
      <label for="outlineInset">Inset Distance (m): <span id="outlineInsetValue">0</span></label>
      <input type="range" id="outlineInset" min="0" max="10" value="0" step="0.5">
    </div>
    <div class="control-group">
      <label for="outlineInsetMode">Inset Mode:</label>
      <select id="outlineInsetMode">
        <option value="off">OFF (無効)</option>
        <option value="topn">TopN のみ</option>
        <option value="all">全体</option>
      </select>
    </div>
    <!-- v0.1.7: 適応的枠線制御とエミュレーション専用表示モード -->
    <hr>
    <h4 style="margin: 10px 0 5px; font-size: 14px; color: #ccc;">v0.1.7 適応的表示</h4>
    <div class="control-group">
      <label for="outlineRenderMode">Render Mode:</label>
      <select id="outlineRenderMode">
        <option value="standard">Standard (標準)</option>
        <option value="inset">Inset (インセット主体)</option>
        <option value="emulation-only">Emulation Only (エミュ専用)</option>
      </select>
    </div>
    <div class="control-group">
      <input type="checkbox" id="adaptiveOutlines"> <label for="adaptiveOutlines">Adaptive Outlines (適応的制御)</label>
    </div>
    <div class="control-group" id="adaptiveSettings" style="display: none;">
      <label for="outlineWidthPreset">Width Preset:</label>
      <select id="outlineWidthPreset">
        <option value="uniform">Uniform (均一)</option>
        <option value="adaptive-density">Adaptive Density (密度対応)</option>
        <option value="topn-focus">TopN Focus (TopN強調)</option>
      </select>
    </div>
    <div class="control-group" id="resolverDemo" style="display: none;">
      <input type="checkbox" id="useOpacityResolvers"> <label for="useOpacityResolvers">Demo: Custom Opacity Resolvers</label>
    </div>
    <div class="control-group">
      <button id="createHeatmapBtn" disabled>2. Create Heatmap</button>
    </div>
    <hr>
    <div class="control-group">
      <button id="toggleBtn" disabled>非表示</button>
      <button id="clearBtn" disabled>Clear All</button>
    </div>
    <div id="status">Ready</div>
    <div id="statistics" style="display: none;">
      <h4>Statistics</h4>
      <div id="statisticsContent"></div>
    </div>
  </div>
  <!-- CesiumJS Heatbox UMD Build -->
  <script src="../../dist/cesium-heatbox.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>